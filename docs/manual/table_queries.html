<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | Badger Database</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-badger.css"><meta name="description" content="Javascript database abstraction layer"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Badger Database"><meta property="twitter:description" content="Javascript database abstraction layer"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.svg" style="width:34px;"></a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/abw/badger-database-js"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/installation.html"><a href="manual/installation.html" data-ice="link">Installation</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation.html"><a href="manual/installation.html#npm" data-ice="link">npm</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation.html"><a href="manual/installation.html#pnpm" data-ice="link">pnpm</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/installation.html"><a href="manual/installation.html#yarn" data-ice="link">yarn</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/connecting.html"><a href="manual/connecting.html" data-ice="link">Connecting</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/connecting.html"><a href="manual/connecting.html#connection-string" data-ice="link">Connection String</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/connecting.html"><a href="manual/connecting.html#connection-parameters" data-ice="link">Connection Parameters</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/connecting.html"><a href="manual/connecting.html#connection-parameter-aliases" data-ice="link">Connection Parameter Aliases</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/connecting.html"><a href="manual/connecting.html#environment-variables" data-ice="link">Environment Variables</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/connecting.html"><a href="manual/connecting.html#pool-options" data-ice="link">Pool Options</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/connecting.html"><a href="manual/connecting.html#disconnecting" data-ice="link">Disconnecting</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/basic_queries.html"><a href="manual/basic_queries.html" data-ice="link">Basic Queries</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/basic_queries.html"><a href="manual/basic_queries.html#run-query--values--options-" data-ice="link">run(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/basic_queries.html"><a href="manual/basic_queries.html#one-query--values--options-" data-ice="link">one(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/basic_queries.html"><a href="manual/basic_queries.html#any-query--values--options-" data-ice="link">any(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/basic_queries.html"><a href="manual/basic_queries.html#all-query--values--options-" data-ice="link">all(query, values, options)</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/named_queries.html"><a href="manual/named_queries.html" data-ice="link">Named Queries</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/query_fragments.html"><a href="manual/query_fragments.html" data-ice="link">Query Fragments</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/query_builder.html"><a href="manual/query_builder.html" data-ice="link">Query Builder</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query_builder.html"><a href="manual/query_builder.html#getting-started" data-ice="link">Getting Started</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query_builder.html"><a href="manual/query_builder.html#selecting-columns-from-tables" data-ice="link">Selecting Columns From Tables</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query_builder.html"><a href="manual/query_builder.html#embedding-raw-sql" data-ice="link">Embedding Raw SQL</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query_builder.html"><a href="manual/query_builder.html#placeholder-values" data-ice="link">Placeholder Values</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query_builder.html"><a href="manual/query_builder.html#running-queries" data-ice="link">Running Queries</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query_builder.html"><a href="manual/query_builder.html#the-importance-of-being-idempotent" data-ice="link">The Importance of Being Idempotent</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query_builder.html"><a href="manual/query_builder.html#named-queries-using-a-query-builder" data-ice="link">Named Queries Using a Query Builder</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html" data-ice="link">Query Builder Methods</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#select-columns-" data-ice="link">select(columns)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#from-table-" data-ice="link">from(table)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#where-criteria-" data-ice="link">where(criteria)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#join-table-" data-ice="link">join(table)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#order-columns-" data-ice="link">order(columns)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#group-columns-" data-ice="link">group(columns)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#having-criteria-" data-ice="link">having(criteria)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#limit-n-" data-ice="link">limit(n)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#offset-n-" data-ice="link">offset(n)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#range-from--to-" data-ice="link">range(from, to)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#columns-columns-" data-ice="link">columns(columns)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#table-name-" data-ice="link">table(name)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#prefix-prefix-" data-ice="link">prefix(prefix)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#one-values-" data-ice="link">one(values)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#any-values-" data-ice="link">any(values)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/builder_methods.html"><a href="manual/builder_methods.html#all-values-" data-ice="link">all(values)</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/tables.html"><a href="manual/tables.html" data-ice="link">Tables</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/table_columns.html"><a href="manual/table_columns.html" data-ice="link">Table Columns</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/table_methods.html"><a href="manual/table_methods.html" data-ice="link">Table Methods</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#insert-data--options-" data-ice="link">insert(data, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#insertonerow-data--options-" data-ice="link">insertOneRow(data, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#insertallrows-array--options-" data-ice="link">insertAllRows(array, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#insertonerecord-data--options-" data-ice="link">insertOneRecord(data, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#insertallrecords-array--options-" data-ice="link">insertAllRecords(array, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#update-set--where--options-" data-ice="link">update(set, where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#updateonerow-set--where--options-" data-ice="link">updateOneRow(set, where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#updateanyrow-set--where--options-" data-ice="link">updateAnyRow(set, where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#updateallrows-set--where--options-" data-ice="link">updateAllRows(set, where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#delete-where-" data-ice="link">delete(where)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#fetchonerow-where--options-" data-ice="link">fetchOneRow(where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#fetchanyrow-where--options-" data-ice="link">fetchAnyRow(where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#fetchallrows-where--options-" data-ice="link">fetchAllRows(where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#fetchonerecord-where--options-" data-ice="link">fetchOneRecord(where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#fetchanyrecord-where--options-" data-ice="link">fetchAnyRecord(where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#fetchallrecords-where--options-" data-ice="link">fetchAllRecords(where, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#record-row-" data-ice="link">record(row)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_methods.html"><a href="manual/table_methods.html#records-rows-" data-ice="link">records(rows)</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/table_queries.html"><a href="manual/table_queries.html" data-ice="link">Table Queries</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#selectonerow-query--values--options-" data-ice="link">selectOneRow(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#selectanyrow-query--values--options-" data-ice="link">selectAnyRow(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#selectallrows-query--values--options-" data-ice="link">selectAllRows(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#selectonerecord-query--values--options-" data-ice="link">selectOneRecord(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#selectanyrecord-query--values--options-" data-ice="link">selectAnyRecord(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#selectallrecords-query--values--options-" data-ice="link">selectAllRecords(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#onerow-query--args-" data-ice="link">oneRow(query, args)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#anyrow-query--args-" data-ice="link">anyRow(query, args)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#allrows-query--args-" data-ice="link">allRows(query, args)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#onerecord-query--args-" data-ice="link">oneRecord(query, args)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#anyrecord-query--args-" data-ice="link">anyRecord(query, args)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#allrecords-query--args-" data-ice="link">allRecords(query, args)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#run-query--values--options-" data-ice="link">run(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#one-query--values--options-" data-ice="link">one(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#any-query--values--options-" data-ice="link">any(query, values, options)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_queries.html"><a href="manual/table_queries.html#all-query--values--options-" data-ice="link">all(query, values, options)</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/table_class.html"><a href="manual/table_class.html" data-ice="link">Table Class</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/table_class.html"><a href="manual/table_class.html#table-configuration" data-ice="link">Table Configuration</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/records.html"><a href="manual/records.html" data-ice="link">Records</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/record_methods.html"><a href="manual/record_methods.html" data-ice="link">Record Methods</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/record_methods.html"><a href="manual/record_methods.html#update-set-" data-ice="link">update(set)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/record_methods.html"><a href="manual/record_methods.html#delete--" data-ice="link">delete()</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/record_methods.html"><a href="manual/record_methods.html#relation-name-" data-ice="link">relation(name)</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/record_class.html"><a href="manual/record_class.html" data-ice="link">Record Class</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/record_class.html"><a href="manual/record_class.html#record-configuration-options" data-ice="link">Record Configuration Options</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/relations.html"><a href="manual/relations.html" data-ice="link">Relations</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/relations.html"><a href="manual/relations.html#relation-types" data-ice="link">Relation Types</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/relations.html"><a href="manual/relations.html#defining-table-relations" data-ice="link">Defining Table Relations</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/relations.html"><a href="manual/relations.html#fetching-relations" data-ice="link">Fetching Relations</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/relations.html"><a href="manual/relations.html#additional-constraints" data-ice="link">Additional Constraints</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/relations.html"><a href="manual/relations.html#shorthand-syntax-for-defining-relations" data-ice="link">Shorthand Syntax for Defining Relations</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/relations.html"><a href="manual/relations.html#custom-queries" data-ice="link">Custom Queries</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/model.html"><a href="manual/model.html" data-ice="link">Model</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/waiter.html"><a href="manual/waiter.html" data-ice="link">Waiter</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/debugging.html"><a href="manual/debugging.html" data-ice="link">Debugging</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/debugging.html"><a href="manual/debugging.html#sql-parse-errors" data-ice="link">SQL Parse Errors</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/extending.html"><a href="manual/extending.html" data-ice="link">Extending</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/extending.html"><a href="manual/extending.html#custom-tables-class" data-ice="link">Custom Tables Class</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/extending.html"><a href="manual/extending.html#custom-tables-object" data-ice="link">Custom Tables Object</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/extending.html"><a href="manual/extending.html#adding-query-builder-methods" data-ice="link">Adding Query Builder Methods</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/extending.html"><a href="manual/extending.html#adding-a-new-database-engine" data-ice="link">Adding a New Database Engine</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/limitations.html"><a href="manual/limitations.html" data-ice="link">Limitations</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/examples.html"><a href="manual/examples.html" data-ice="link">Examples</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown" data-ice="content"><h1 id="table-queries">Table Queries</h1><p>You can define named queries and query fragments in your tables.
This allows you to scope queries more closely to the table that
they relate to, instead of piling everything into the main database
definition.</p>
<p>They work in exactly the same way as for
<a href="manual/named_queries.html">named queries</a> defined on the database.
You can use static SQL queries, you can embed query fragments into
queries, or you can use the <a href="manual/query_builder.html">query builder</a>
to generate the queries for you.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const db = connect({
  database: 'sqlite://.db',
  tables: {
    users: {
      columns: 'id name email'
      queries: {
        selectByName:
          // SQL including table-specific fragments
          'SELECT &lt;columns&gt; FROM &lt;table&gt; WHERE name = ?',
        selectByEmail:
          // using a query builder
          t =&gt; t.select('id name email').from('users').where('email'),
        allBadgers:
          // using the .fetch query builder shortcut
          t =&gt; t.fetch.where({ animal: 'Badger' })
      }
    },
  }
});

// fetch the users table
const users = await db.table('users');

// calling named queries
const user1 = await users.one('selectByName', ['Bobby Badger']);
const user2 = await users.any('selectByEmail', ['brian@badgerpower.com']);</code></code></pre>
<p>The table pre-defines two fragments for each table: <code>&lt;table&gt;</code> is the quoted
table name (e.g. <code>"users"</code>) and <code>&lt;columns&gt;</code> is a list of all the columns
in the table, scoped to the table name with both parts properly quoted
(e.g. `"users"."id", "users"."name", "users"."email").</p>
<p>This allows you to write more succinct named queries where you want to include
all the columns:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// tables.users.queries...
selectByName:
  'SELECT &lt;columns&gt; FROM &lt;table&gt; WHERE name = ?',</code></code></pre>
<p>To use the query builder define a named query as a function.  It will
receive a reference to the table object on which you can call <code>select()</code>
or <code>from()</code> to start a query.  Further query builder methods can then
be called on it.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// tables.users.queries...
selectByEmail:
  t =&gt; t.select('id name email').from('users').where('email'),</code></code></pre>
<p>If you want to start a query with a method other than <code>select()</code>
or <code>from()</code> for some reason then you must prefix it with <code>.build</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// tables.users.queries...
selectByEmail:
  t =&gt; t.build.where('email').select('id name email').from('users')</code></code></pre>
<p>The table provides a <code>.fetch</code> shortcut which is a query
builder that has the table name and all columns pre-selected.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// tables.users.queries...
selectByEmail:
  t =&gt; t.fetch.where('email')
  // -&gt; SELECT "users"."id", "users"."name", "users"."email"
  //    FROM "users"
  //    WHERE "email" = ?</code></code></pre>
<h2 id="selectonerow-query--values--options-">selectOneRow(query, values, options)</h2><p>There are three different methods for selecting rows from the table using
SQL queries or named queries.  The <code>selectOneRow()</code> method will return a single row.
If the row isn't found or multiple rows match the criteria then an
<code>UnexpectedRowCount</code> error will be thrown with a message of
the form <code>N rows were returned when one was expected</code>.</p>
<p>You can then call a named query by specifying the name as the
first argument, followed by an array of any placeholder values.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// returns a single row or throws an error
const brian = await users.selectOneRow(
  'selectByName', ['Bobby Badger']
);
console.log('Brian:', brian);</code></code></pre>
<p>You can can also use SQL query string in place of a named query.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// returns a single row or throws an error
const brian = await users.selectOneRow(
  'SELECT * FROM users WHERE name = ?',
  ['Bobby Badger']
);
console.log('Brian:', brian);</code></code></pre>
<p>You can pass a third argument which can contain the <code>record</code> option if you
want the data returned as a <a href="manual/record.html">record</a> instead of a row.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const brian = await users.selectOneRow(
  'selectByName', ['Bobby Badger'],
  { record: true }
);</code></code></pre>
<p>The <code>selectRow()</code> method is provided as an alias to this method.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const brian = await users.selectRow(
  'selectByName', ['Bobby Badger']
);</code></code></pre>
<h2 id="selectanyrow-query--values--options-">selectAnyRow(query, values, options)</h2><p>The <code>selectAnyRow()</code> method is like <a href="#selectonerow-query--values--options-">selectOneRow()</a>
but will return a single row if it exists or <code>undefined</code> if it doesn't.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// returns a single row or undefined
const brian = await users.selectAnyRow(
  'selectByName', ['Bobby Badger']
);
if (brian) {
  console.log('Brian:', brian);
}
else {
  console.log('Brian Badger was not found');
}</code></code></pre>
<p>As per <a href="#selectonerow-query--values--options-">selectOneRow()</a> you can pass an
additional object containing the <code>record</code> option to return the row as a record
object.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const brian = await users.selectAnyRow(
  'selectByName', ['Bobby Badger']
  { record: true }
);</code></code></pre>
<h2 id="selectallrows-query--values--options-">selectAllRows(query, values, options)</h2><p>The <code>selectAllRows()</code> method will return an array of all matching rows.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// returns an array of all rows (possibly empty)
const bobbies = await users.selectAllRows(
  'selectByName', ['Bobby Badger']
);
if (bobbies.length) {
  console.log("Fetched %s users called 'Bobby Badger':", bobbies.length);
}
else {
  console.log("There aren't any users called 'Bobby Badger'");
}</code></code></pre>
<p>The <code>selectRows()</code> method is provided as an alias to this method.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const bobbies = await users.selectRows(
  'selectByName', ['Bobby Badger']
);</code></code></pre>
<h2 id="selectonerecord-query--values--options-">selectOneRecord(query, values, options)</h2><p>This method is a wrapper around <a href="#selectonerow-query--values--options-">selectOneRow()</a> which returns
the row as a record object.  It effectively sets the <code>record</code> option for you.</p>
<p>Read more about records <a href="manual/records.html">here</a>.</p>
<h2 id="selectanyrecord-query--values--options-">selectAnyRecord(query, values, options)</h2><p>This method is a wrapper around <a href="#selectanyrow-query--values--options-">selectAnyRow()</a> which returns
the row as a record object.</p>
<h2 id="selectallrecords-query--values--options-">selectAllRecords(query, values, options)</h2><p>This method is a wrapper around <a href="#selectallrows-query--values--options-">selectAllRows()</a> which returns
the rows as an array of record objects.</p>
<h2 id="onerow-query--args-">oneRow(query, args)</h2><p>This method is a multiplexer around
<a href="#selectonerow-query--values--options-">selectOneRow()</a>
and
<a href="manual/table_methods#fetchonerow-where--options-">fetchOneRow()</a>.  If the first argument
is a string or query builder object then it calls <code>selectOneRow()</code>
otherwise it calls <code>fetchOneRow()</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.selectOneRow()
const row = await users.oneRow(
  'selectByName', ['Bobby Badger']
);</code></code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.fetchOneRow()
const row = await users.oneRow(
  { name: 'Bobby Badger' }
);</code></code></pre>
<h2 id="anyrow-query--args-">anyRow(query, args)</h2><p>This method is a multiplexer around
<a href="#selectanyrow-query--values--options-">selectAnyRow()</a>
and
<a href="manual/table_methods#fetchanyrow-where--options-">fetchAnyRow()</a>.  If the first argument
is a string or query builder object then it calls <code>selectAnyRow()</code>,
otherwise it calls <code>fetchAnyRow()</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.selectAnyRow()
const row = await users.anyRow(
  'selectByName', ['Bobby Badger']
);</code></code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.fetchAnyRow()
const row = await users.anyRow(
  { name: 'Bobby Badger' }
);</code></code></pre>
<h2 id="allrows-query--args-">allRows(query, args)</h2><p>This method is a multiplexer around
<a href="#selectallrows-query--values--options-">selectAllRows()</a>
and
<a href="manual/table_methods#fetchallrows-where--options-">fetchAllRows()</a>.  If the first argument
is a string or query builder object then it calls <code>selectAllRows()</code>,
otherwise it calls <code>fetchAllRows()</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.selectAllRows()
const rows = await users.allRows(
  'selectByName', ['Bobby Badger']
);</code></code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.fetchAllRows()
const row = await users.allRows(
  { name: 'Bobby Badger' }
);</code></code></pre>
<h2 id="onerecord-query--args-">oneRecord(query, args)</h2><p>This method is a multiplexer around
<a href="#selectonerecord-query--values--options-">selectOneRecord()</a>
and
<a href="manual/table_methods#fetchonerecord-where--options-">fetchOneRecord()</a>.  If the first argument
is a string or query builder object then it calls <code>selectOneRecord()</code>
otherwise it calls <code>fetchOneRecord()</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.selectOneRecord()
const row = await users.oneRecord(
  'selectByName', ['Bobby Badger']
);</code></code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.fetchOneRecord()
const row = await users.oneRecord(
  { name: 'Bobby Badger' }
);</code></code></pre>
<h2 id="anyrecord-query--args-">anyRecord(query, args)</h2><p>This method is a multiplexer around
<a href="#selectanyrecord-query--values--options-">selectAnyRecord()</a>
and
<a href="manual/table_methods#fetchanyrecord-where--options-">fetchAnyRecord()</a>.  If the first argument
is a string or query builder object then it calls <code>selectAnyRecord()</code>,
otherwise it calls <code>fetchAnyRecord()</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.selectAnyRecord()
const row = await users.anyRecord(
  'selectByName', ['Bobby Badger']
);</code></code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.fetchAnyRecord()
const row = await users.anyRecord(
  { name: 'Bobby Badger' }
);</code></code></pre>
<h2 id="allrecords-query--args-">allRecords(query, args)</h2><p>This method is a multiplexer around
<a href="#selectallrecords-query--values--options-">selectAllRecords()</a>
and
<a href="manual/table_methods#fetchallrecords-where--options-">fetchAllRecords()</a>.  If the first argument
is a string or query builder object then it calls <code>selectAllRecords()</code>,
otherwise it calls <code>fetchAllRecords()</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.selectAllRecords()
const rows = await users.allRecords(
  'selectByName', ['Bobby Badger']
);</code></code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// same as users.fetchAllRecords()
const row = await users.allRecords(
  { name: 'Bobby Badger' }
);</code></code></pre>
<h2 id="run-query--values--options-">run(query, values, options)</h2><p>This is a low-level method for running a named query, or indeed
any arbitrary SQL query, where you're not expecting to fetch any rows.</p>
<p>It's just like the <a href="manual/basic_queries.html#run-query--values--options-">run()</a>
method on the database object.  The only difference is that the table-specific
fragments for <code>&lt;table&gt;</code> and <code>&lt;columns&gt;</code> are pre-defined.
Any other <code>fragments</code> that you've specified in your table definition
will also be available.</p>
<p>As a trivial example, you can embed the <code>&lt;table&gt;</code> fragment in a query like this:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">users.run('DROP TABLE &lt;table&gt;')</code></code></pre>
<p>Or you could define that as a named query called <code>drop</code> which you could run
like so:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">users.run('drop')</code></code></pre>
<h2 id="one-query--values--options-">one(query, values, options)</h2><p>This is another low-level method for running an SQL query where you're
expecting to get exactly one row returned.  It's just like the
corresponding <a href="manual/basic_queries.html#one-query--values--options-">one()</a>
database method, with the additional table-specific SQL fragments available, as
per <a href="#run-query--values--options-">run()</a>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const bobby = users.one(
  'SELECT &lt;columns&gt; FROM &lt;table&gt; WHERE name=?',
  ['Bobby Badger']
)</code></code></pre>
<p>You can also run any pre-defined named <code>queries</code> or include query <code>fragments</code>
in the queries you run using this method.</p>
<h2 id="any-query--values--options-">any(query, values, options)</h2><p>This is yet another low-level method for running an SQL query, but where
you're expecting to get one row returned which may or may not exist.
It's just like the corresponding
<a href="manual/basic_queries.html#any-query--values--options-">any()</a>
database method, with the additional table-specific SQL fragments available,
as per <a href="#run-query--values--options-">run()</a>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const bobby = users.any(
  'SELECT &lt;columns&gt; FROM &lt;table&gt; WHERE name=?',
  ['Bobby Badger']
)</code></code></pre>
<p>Pre-defined named <code>queries</code> can also be run, or you can include query
<code>fragments</code> in the SQL.</p>
<h2 id="all-query--values--options-">all(query, values, options)</h2><p>The final low-level method for running an SQL query where you're expecting to
get multiple rows.  It's just like the corresponding
<a href="manual/basic_queries.html#all-query--values--options-">all()</a>
database method, with the additional table-specific SQL fragments available, as
per <a href="#run-query--values--options-">run()</a>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const rows = users.all(
  'SELECT &lt;columns&gt; FROM &lt;table&gt;',
)</code></code></pre>
<p>Unsurprisingly, this method also allows you to run pre-defined named
<code>queries</code> or embed query <code>fragments</code> in the SQL.</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>


</body></html>